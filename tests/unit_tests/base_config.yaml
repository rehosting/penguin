# yaml-language-server: $schema=https://rehosti.ng/igloo/config_schema.yaml
core:
  arch: @ARCH@
  kernel: /igloo_static/kernels/@KERNEL_VERSION@/vmlinux.@ARCH@
  fs: /tmp/generated/fs.tar
  qcow: /tmp/generated/image.qcow
  root_shell: false
  show_output: false
  version: 1.0.0
env:
  igloo_init: /init

pseudofiles: {}
nvram: {}
static_files:
  /igloo/init:
    type: host_file
    host_path: /pkg/resources/init.sh
    mode: 00555

plugins:
  core:
    description: 'Utility: sanity tests and timeout'
    version: 1.0.0
  netbinds:
    description: 'Analysis: Track network binds'
    version: 1.0.0
  vpn:
    enabled: false
    description: 'Utility: network bridging'
    version: 1.0.0
    depends_on: netbinds
  shell:
    description: 'Analysis: track shell script coverage and variable accesses'
    version: 1.0.0
  coverage:
    description: 'Analysis: Track coverage of binaries'
    version: 1.0.0
  env:
    description: 'Analysis: Track accesses to kernel and uboot environment'
    version: 1.0.0
  pseudofiles:
    description: 'Analysis & Intervention: Track failed /dev and /proc files. Hide
      these failures using models specifed in config'
    version: 1.0.0
  health:
    description: 'Analysis: Track health of the system'
    version: 1.0.0
  nmap:
    description: 'Analysis: run nmap scans on guest network services'
    depends_on: vpn
    enabled: false
    version: 1.0.0
  zap:
    description: 'Analysis: Run ZAP web crawler on guest web servers'
    depends_on: vpn
    enabled: false
    version: 1.0.0
  interfaces:
    description: 'Analysis: Track network interfaces'
    version: 1.0.0
    depends_on: health